/*!
 * drag-tracker v0.4.0
 * https://github.com/Sphinxxxx/drag-tracker#readme
 *
 * Copyright 2017-2018 Andreas Borgen
 * Released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dragTracker=e()}(this,function(){"use strict";return function(t){var e=Element.prototype;e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.closest||(e.closest=function(t){var e=this;do{if(e.matches(t))return e;e="svg"===e.tagName?e.parentNode:e.parentElement}while(e);return null});var n=(t=t||{}).container||document.documentElement,o=t.selector,a=t.callback||console.log,i=t.callbackDragStart,c=t.callbackDragEnd,r=t.callbackClick,u=!1!==t.roundCoords,d=!1!==t.dragOutside,s=t.handleOffset||!1!==t.handleOffset,l=null;switch(s){case"center":l=!0;break;case"topleft":case"top-left":l=!1}var f=void 0,h=void 0,p=void 0;function v(t,e,o,a){var i=t.clientX,c=t.clientY;function r(t,e,n){return Math.max(e,Math.min(t,n))}if(e){var d=e.getBoundingClientRect();i-=d.left,c-=d.top,o&&(i-=o[0],c-=o[1]),a&&(i=r(i,0,d.width),c=r(c,0,d.height)),e!==n&&(null!==l?l:"circle"===e.nodeName||"ellipse"===e.nodeName)&&(i-=d.width/2,c-=d.height/2)}return u?[Math.round(i),Math.round(c)]:[i,c]}function m(t){(f=o?t.target.closest(o):{})&&(t.preventDefault(),t.stopPropagation(),h=o&&s?v(t,f):[0,0],p=v(t,n,h),u&&(p=p.map(Math.round)),i&&i(f,p))}function g(t){if(f){t.preventDefault(),t.stopPropagation();var e=v(t,n,h,!d);a(f,e,p)}}function w(t){if(f){if(c||r){var e=v(t,n,h,!d);r&&p[0]===e[0]&&p[1]===e[1]&&r(f,p),c&&c(f,e,p)}f=null}}function b(t){w(L(t))}function E(t){return void 0!==t.buttons?1===t.buttons:1===t.which}function k(t,e){1===t.touches.length?e(L(t)):w(t)}function L(t){var e=t.targetTouches[0];return e||(e=t.changedTouches[0]),e.preventDefault=t.preventDefault.bind(t),e.stopPropagation=t.stopPropagation.bind(t),e}n.addEventListener("mousedown",function(t){E(t)&&m(t)}),n.addEventListener("touchstart",function(t){k(t,m)}),window.addEventListener("mousemove",function(t){f&&(E(t)?g(t):w(t))}),window.addEventListener("touchmove",function(t){k(t,g)}),window.addEventListener("mouseup",function(t){f&&!E(t)&&w(t)}),n.addEventListener("touchend",b),n.addEventListener("touchcancel",b)}});