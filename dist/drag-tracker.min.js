/*!
 * drag-tracker v0.4.5
 * https://github.com/Sphinxxxx/drag-tracker#readme
 *
 * Copyright 2017-2018 Andreas Borgen
 * Released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.dragTracker=e()}(this,function(){"use strict";return function(t){var e=Element.prototype;e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.closest||(e.closest=function(t){var e=this;do{if(e.matches(t))return e;e="svg"===e.tagName?e.parentNode:e.parentElement}while(e);return null});var n=(t=t||{}).container||document.documentElement,o=t.selector,a=t.callback||console.log,r=t.callbackDragStart,c=t.callbackDragEnd,i=t.callbackClick,u=t.propagateEvents,s=!1!==t.roundCoords,l=!1!==t.dragOutside,d=t.handleOffset||!1!==t.handleOffset,f=null;switch(d){case"center":f=!0;break;case"topleft":case"top-left":f=!1}var g=void 0;function h(t,e,o,a){var r=t.clientX,c=t.clientY;function i(t,e,n){return Math.max(e,Math.min(t,n))}if(e){var u=e.getBoundingClientRect();r-=u.left,c-=u.top,o&&(r-=o[0],c-=o[1]),a&&(r=i(r,0,u.width),c=i(c,0,u.height)),e!==n&&(null!==f?f:"circle"===e.nodeName||"ellipse"===e.nodeName)&&(r-=u.width/2,c-=u.height/2)}return s?[Math.round(r),Math.round(c)]:[r,c]}function v(t){t.preventDefault(),u||t.stopPropagation()}function m(t){var e=void 0;if(e=o?o instanceof Element?o.contains(t.target)?o:null:t.target.closest(o):{}){v(t);var a=o&&d?h(t,e):[0,0],c=h(t,n,a);g={target:e,mouseOffset:a,startPos:c,actuallyDragged:!1},r&&r(e,c)}}function p(t){if(g){v(t);var e=g.startPos,o=h(t,n,g.mouseOffset,!l);g.actuallyDragged=g.actuallyDragged||e[0]!==o[0]||e[1]!==o[1],a(g.target,o,e)}}function w(t,e){if(g){if(c||i){var o=!g.actuallyDragged,a=o?g.startPos:h(t,n,g.mouseOffset,!l);i&&o&&!e&&i(g.target,a),c&&c(g.target,a,g.startPos,e||o&&i)}g=null}}function E(t,e){w(k(t),e)}function b(t){return void 0!==t.buttons?1===t.buttons:1===t.which}function D(t,e){1===t.touches.length?e(k(t)):w(t,!0)}function k(t){var e=t.targetTouches[0];return e||(e=t.changedTouches[0]),e.preventDefault=t.preventDefault.bind(t),e.stopPropagation=t.stopPropagation.bind(t),e}n.addEventListener("mousedown",function(t){b(t)?m(t):w(t,!0)}),n.addEventListener("touchstart",function(t){D(t,m)}),window.addEventListener("mousemove",function(t){g&&(b(t)?p(t):w(t))}),window.addEventListener("touchmove",function(t){D(t,p)}),window.addEventListener("mouseup",function(t){g&&!b(t)&&w(t)}),n.addEventListener("touchend",function(t){return E(t)}),n.addEventListener("touchcancel",function(t){return E(t,!0)})}});